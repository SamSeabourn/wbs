---
import type { ImageType } from '../global';

interface Props {
	logos: ImageType[];
}

const { logos } = Astro.props as Props;

// We calculate a safe duration: more logos = slower scroll (feels natural)
// and we use a large translate distance so itâ€™s truly seamless
const duration = `${Math.max(20, logos.length * 8)}s`;
---

<div class="relative mb-10">
	<div class="flex overflow-hidden w-screen max-w-480 mx-auto">
		<div
			class="flex shrink-0 items-center justify-around min-w-full animate-marquee"
			style={`--marquee-duration: ${duration};` as any}
		>
			{
				[...logos, ...logos].map((logo) => (
					<img
						loading="lazy"
						src={logo.src}
						alt={logo.alt}
						class="h-56 w-56 mx-8 object-contain select-none pointer-events-none"
					/>
				))
			}
		</div>

		<div
			aria-hidden="true"
			class="flex shrink-0 items-center justify-around min-w-full animate-marquee"
			style={`--marquee-duration: ${duration};` as any}
		>
			{
				[...logos, ...logos].map((logo) => (
					<img
						loading="lazy"
						src={logo.src}
						alt={logo.alt}
						class="h-56 w-56 mx-8 object-contain select-none pointer-events-none"
					/>
				))
			}
		</div>
	</div>

	<div
		class="pointer-events-none absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-black to-transparent"
	>
	</div>
	<div
		class="pointer-events-none absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-black to-transparent"
	>
	</div>

	<!-- Pause on hover -->
	<div class="group hover:[&_.animate-marquee]:animation-paused w-full h-full absolute inset-0">
	</div>
</div>

<style is:global>
	@keyframes marquee {
		from {
			transform: translateX(0%);
		}
		to {
			transform: translateX(-50%);
		}
	}

	.animate-marquee {
		animation: marquee var(--marquee-duration, 30s) linear infinite;
	}
</style>
